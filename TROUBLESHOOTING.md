# 博客编辑器问题排查指南

## 🔍 问题诊断步骤

### 1. 访问测试页面
首先访问专门的测试页面来隔离问题：
```
http://localhost:3000/test-editor
```

### 2. 打开开发者工具
- **Chrome/Safari**: 按 F12 或 Cmd+Option+I (Mac)
- 切换到 **Console** 标签
- 切换到 **Network** 标签（用于检查API请求）

### 3. 测试基本输入功能
在测试页面中：
1. 点击文本框
2. 输入一些文字
3. 检查控制台是否有输出 "编辑器内容改变: xxx"
4. 检查页面上的字符计数是否更新

### 4. 测试表单提交
1. 输入一些内容
2. 点击"测试提交"按钮
3. 检查控制台是否有输出 "测试提交内容: xxx"
4. 检查页面是否显示提交成功信息

## 🚨 常见问题及解决方案

### 问题1: 无法在文本框中输入
**可能原因：**
- CSS样式冲突
- JavaScript事件被阻止
- 浏览器兼容性问题

**解决方案：**
1. 检查浏览器控制台是否有错误
2. 尝试禁用浏览器插件
3. 尝试无痕模式/私人浏览模式
4. 检查是否有全局CSS影响

### 问题2: 输入后内容不保存
**可能原因：**
- onChange 事件处理问题
- 状态更新问题

**解决方案：**
1. 检查控制台是否有 "编辑器内容改变" 日志
2. 点击调试按钮查看表单状态
3. 检查是否有JavaScript错误

### 问题3: 提交时显示"请输入正文内容"
**可能原因：**
- 表单状态未正确更新
- 验证逻辑问题

**解决方案：**
1. 在提交前点击"打印表单状态到控制台"按钮
2. 检查 form.content 是否有值
3. 检查控制台的提交日志

## 🔧 调试功能

### 管理员博客页面调试
访问 `/admin/blog` 页面时：
1. 点击"新增博客"
2. 查看调试信息面板
3. 使用"打印表单状态到控制台"按钮
4. 检查控制台输出

### 控制台日志说明
- `编辑器内容改变: xxx` - 编辑器内容发生变化
- `内容更新: xxx` - 表单状态更新
- `提交表单内容: xxx` - 表单提交时的内容
- `发送到服务器的数据: xxx` - 发送给API的数据
- `服务器响应: xxx` - API返回的响应

## 🌐 浏览器兼容性检查

### Safari (Mac)
1. 确保Safari版本 > 14
2. 检查"开发"菜单 -> "停用JavaScript"是否被选中
3. 尝试清除缓存和Cookie

### Chrome (Mac)
1. 确保Chrome版本 > 90
2. 尝试禁用扩展程序
3. 检查是否有内容阻止程序

### 通用步骤
1. 清除浏览器缓存
2. 禁用所有扩展程序
3. 尝试无痕模式
4. 检查网络连接

## 🔒 权限检查

### 登录状态
确保已以管理员身份登录：
1. 访问 `/admin` 页面
2. 检查是否能正常访问管理功能
3. 如果未登录，访问 `/login` 页面

### Cookie检查
在开发者工具中检查Cookie：
1. 切换到 **Application** 标签
2. 查看 **Storage** > **Cookies**
3. 确认有 `token` Cookie

## 📞 获取帮助

如果以上步骤都无法解决问题，请提供以下信息：

1. **浏览器信息**：版本、操作系统
2. **控制台错误**：完整的错误信息截图
3. **网络请求**：Network标签中的请求/响应
4. **表单状态**：点击调试按钮后的控制台输出
5. **操作步骤**：具体的重现步骤

## 🛠️ 备用方案

如果编辑器仍然无法工作，可以尝试：

1. **直接编辑数据库**：使用数据库工具直接添加博客内容
2. **使用API测试工具**：如Postman直接调用API
3. **简化版编辑器**：回退到最基础的textarea元素

---

*最后更新：2024年*